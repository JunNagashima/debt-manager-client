# ホーム画面 (HOME)

## 画面ID
`HOME`

## 画面の目的
- ユーザーのメイン画面として、残高状況と対応が必要な項目を一目で確認できる
- クイックアクションで頻繁に使う機能へ素早くアクセスできる
- 未対応のアクション（承認待ち）を見逃さないようにする

## 表示要素

### ヘッダー

**左側**
- ユーザーアバター（絵文字: 🌸）
- ユーザー情報
  - 挨拶メッセージ: 「おかえりなさい」
  - ユーザー名: 「山田 花子さん」

**右側**
- 通知アイコン（ベルアイコン）
  - 未読がある場合はバッジ表示
- 設定アイコン（歯車アイコン）

### 残高サマリーセクション

**タイトル**
- 「今月の残高」

**内容**
- 受け取り予定額（lent）
  - ラベル: 「受け取り予定」
  - ドットアイコン（緑色）
  - 金額表示: 例「¥12,500」（緑色）
- 縦線の区切り
- お支払い予定額（borrowed）
  - ラベル: 「お支払い予定」
  - ドットアイコン（赤色）
  - 金額表示: 例「¥3,200」（赤色）

### クイックアクションセクション

3つの大きなボタンが横並び：

1. **立替を申請**
   - アイコン: 💸
   - ラベル: 「立替を申請」
   - 背景色: 立替カラー

2. **返済を記録**
   - アイコン: 💰
   - ラベル: 「返済を記録」
   - 背景色: 返済カラー

3. **相殺を提案**
   - アイコン: ⚖️
   - ラベル: 「相殺を提案」
   - 背景色: 相殺カラー

### 対応待ちセクション

**ヘッダー**
- タイトル: 「対応待ち」
- 件数バッジ: 例「3」（赤色）
- 「すべて見る」リンク

**対応待ちリスト**

各アイテムの構成：
- アイコンバッジ（種類によって色が異なる）
  - 立替: 「立」（オレンジ背景）
  - 相殺: 「相」（青背景）
  - フレンド: 「友」（ピンク背景）
- タイトル
  - 例: 「立替申請が届いています」
  - 例: 「相殺の提案が届いています」
  - 例: 「フレンド申請が届いています」
- 詳細情報
  - 例: 「佐藤さんから ¥3,000」
  - 例: 「鈴木さんから」
  - 例: 「山本 太郎さんから」
- 「確認」ボタン（右側）

### フレンドとの残高セクション

**ヘッダー**
- タイトル: 「フレンドとの残高」
- 「すべて見る」リンク

**フレンド残高リスト**

各フレンドアイテムの構成：
- アバター（姓の1文字）
- フレンド名
  - 例: 「佐藤 花子」
- 残高状況
  - 貸している場合: 「あなたが貸しています」（緑色）
  - 借りている場合: 「あなたが借りています」（赤色）
  - 清算済み: 「清算済み」（グレー）
- 残高金額
  - 例: 「¥6,000」（状況に応じた色）
- 右矢印アイコン

表示例：
- 佐藤 花子: ¥6,000 貸し
- 鈴木 一郎: ¥2,500 借り
- 田中 美咲: ¥6,500 貸し
- 高橋 健太: ¥0 清算済み

## ユーザーアクション

| アクション | トリガー | 遷移先/処理 | 使用API |
|---|---|---|---|
| 立替を申請 | クイックアクションボタンクリック | 立替申請モーダル表示 | - |
| 返済を記録 | クイックアクションボタンクリック | 返済記録モーダル表示 | - |
| 相殺を提案 | クイックアクションボタンクリック | 相殺提案モーダル表示 | - |
| 対応待ち確認（立替） | 立替申請アイテムクリック | 立替承認モーダル表示 | - |
| 対応待ち確認（相殺） | 相殺提案アイテムクリック | 相殺承認モーダル表示 | - |
| 対応待ち確認（フレンド） | フレンド申請アイテムクリック | フレンド承認モーダル表示 | - |
| フレンド残高確認 | フレンドアイテムクリック | 残高詳細画面へ遷移 | - |
| 対応待ちすべて見る | リンククリック | 各種一覧画面へ遷移 | - |
| フレンドすべて見る | リンククリック | フレンド画面へ遷移 | - |
| 通知確認 | 通知アイコンクリック | 通知一覧表示（未実装） | - |
| 設定 | 設定アイコンクリック | 設定画面へ遷移 | - |

## モーダル一覧

### modal-advance（立替申請作成）

**表示項目**
- タイトル: 「立替を申請」
- 閉じるボタン（×）

**フォーム項目**
1. 誰が立て替えた？
   - セレクトボックス
   - フレンド一覧から選択
   - プレースホルダー: 「フレンドを選択」
2. 金額
   - 数値入力（¥プレフィックス付き）
   - プレースホルダー: 「0」
   - 最小値: 1
3. 日付
   - date型input
   - デフォルト: 当日
   - ヒント: 「未来の日付は選択できません」
4. メモ（任意）
   - テキスト入力
   - プレースホルダー: 「例：ランチ代」

**ボタン**
- キャンセルボタン（セカンダリ）
- 申請するボタン（プライマリ）

### modal-repayment（返済記録作成）

**表示項目**
- タイトル: 「返済を記録」
- 閉じるボタン（×）

**フォーム項目**
1. 誰に返済した？
   - セレクトボックス
   - フレンド一覧から選択（残高情報付き）
   - 例: 「佐藤 花子（¥6,000 貸し）」
   - プレースホルダー: 「フレンドを選択」
2. 金額
   - 数値入力（¥プレフィックス付き）
   - プレースホルダー: 「0」
   - 最小値: 1
3. 日付
   - date型input
   - デフォルト: 当日
4. メモ（任意）
   - テキスト入力
   - プレースホルダー: 「例：ランチ代の返済」

**ボタン**
- キャンセルボタン（セカンダリ）
- 記録するボタン（プライマリ）

### modal-offset（相殺提案作成）

**表示項目**
- タイトル: 「相殺を提案」
- 閉じるボタン（×）

**フォーム項目**
1. 誰と相殺する？
   - セレクトボックス
   - 相殺可能なフレンドのみ表示
   - プレースホルダー: 「フレンドを選択」
   - ヒント: 「お互いに貸し借りがあるフレンドのみ表示」

**相殺プレビュー**（フレンド選択後に表示）
- ラベル: 「相殺可能額」
- 金額表示: 例「¥2,500」（大きく表示）
- 注記: 「双方の残高から自動計算されます」

**ボタン**
- キャンセルボタン（セカンダリ）
- 提案するボタン（プライマリ）

### modal-approve-advance（立替申請承認）

**表示項目**
- タイトル: 「立替申請の確認」
- 閉じるボタン（×）

**申請内容カード**
- 申請者: 「佐藤 花子さん」
- 金額: 「¥3,000」（大きく表示）
- 日付: 「2025/12/19」
- メモ: 「ランチ代」

**影響通知**
- 警告アイコン
- メッセージ: 「承認すると、あなたの借りが<br>**¥3,000 増えます**」

**ボタン**
- 却下ボタン（デンジャー）
- 承認するボタン（プライマリ）

### modal-approve-offset（相殺申請承認）

**表示項目**
- タイトル: 「相殺申請の確認」
- 閉じるボタン（×）

**申請内容カード**
- 申請者: 「鈴木 一郎さん」
- 相殺額: 「¥2,500」（大きく表示）

**相殺後残高プレビュー**
- ラベル: 「相殺後の残高」（中央）
- 変化の表示:
  - 現在: 「¥2,500 借り」（赤色）
  - 矢印アイコン
  - 相殺後: 「¥0 清算」（緑色、太字）

**ボタン**
- 却下ボタン（デンジャー）
- 承認するボタン（プライマリ）

### modal-approve-friend（フレンド申請承認）

**表示項目**
- タイトル: 「フレンド申請」
- 閉じるボタン（×）

**ユーザーカード**（中央揃え）
- アバター: 「山」（大きく表示）
- ユーザー名: 「山本 太郎」
- ユーザーID: 「@yamamoto_taro」

**確認メッセージ**
- 「フレンドになりますか？」

**ボタン**
- キャンセルボタン（セカンダリ）
- 承認するボタン（プライマリ）

## 使用API

### 初期表示時

**残高サマリー取得**
```
GET /api/v1/balances
```
レスポンス例:
```json
[
  {
    "user": {"id": "user_002", "name": "佐藤花子"},
    "net": {"lent": 6000, "borrowed": 0}
  },
  {
    "user": {"id": "user_003", "name": "鈴木一郎"},
    "net": {"lent": 0, "borrowed": 2500}
  }
]
```

**立替申請一覧取得**
```
GET /api/v1/advance-requests
```

**相殺申請一覧取得**
```
GET /api/v1/offset-requests
```

**フレンド申請一覧取得**
```
GET /api/v1/friends/requests
```

### 立替申請作成時

```
POST /api/v1/advance-requests
```
リクエストボディ:
```json
{
  "payerId": "user_001",
  "receiverId": "user_002",
  "amount": 3000,
  "occurredDate": "2025-10-19",
  "note": "ランチ代"
}
```

### 返済記録作成時

```
POST /api/v1/repayments
```
リクエストボディ:
```json
{
  "payerId": "user_002",
  "receiverId": "user_001",
  "amount": 2000,
  "occurredDate": "2025-10-21",
  "note": "ランチ返済"
}
```

### 相殺提案作成時

```
POST /api/v1/offset-requests
```
リクエストボディ:
```json
{
  "counterpartyUserId": "user_002"
}
```

### 立替申請承認時

**承認**
```
POST /api/v1/advance-requests/:id/approve
```

**却下**
```
POST /api/v1/advance-requests/:id/reject
```

### 相殺申請承認時

**承認**
```
POST /api/v1/offset-requests/:id/approve
```

**却下**
```
POST /api/v1/offset-requests/:id/reject
```

### フレンド申請承認時

```
POST /api/v1/friends/requests/:requestId/approve
```

## 画面遷移

### 遷移元
- ログイン画面
- ボトムナビゲーション（ホームタブ）

### 遷移先
- 残高詳細画面: フレンドアイテムクリック時
- 立替申請一覧画面: 対応待ち「すべて見る」クリック時（立替セクション）
- 相殺申請一覧画面: 対応待ち「すべて見る」クリック時（相殺セクション）
- フレンド画面: フレンド「すべて見る」クリック時 or ボトムナビゲーション
- 設定画面: 設定アイコンクリック時

## 実装時の注意事項

1. **リアルタイム更新**
   - 対応待ち件数は定期的にポーリングするか、WebSocketで更新
   - 残高サマリーは画面フォーカス時に再取得

2. **エラーハンドリング**
   - API呼び出し失敗時は適切なエラーメッセージを表示
   - ネットワークエラー時は再試行オプションを提供

3. **パフォーマンス**
   - 初期表示時は必要最小限のデータのみ取得
   - フレンド一覧は最大5件程度に制限（残りは「すべて見る」から）

4. **アクセシビリティ**
   - すべてのボタンに適切なaria-label
   - キーボードナビゲーション対応
   - スクリーンリーダー対応

5. **レスポンシブデザイン**
   - モバイルファースト
   - タブレット・デスクトップでも適切に表示
