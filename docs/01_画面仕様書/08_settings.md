# 設定画面 (SETTINGS)

## 画面ID
`SETTINGS`

## 画面の目的
- アカウント情報の確認と編集
- 通知設定の管理
- アプリケーション設定の変更

## 表示要素

### ヘッダー

**左側**
- 戻るボタン（左矢印アイコン）

**中央**
- 画面タイトル: 「設定」

### プロフィールカード

**構成**（クリック可能）
- アバター（大きく表示）
  - 絵文字: 例「🌸」
  - 編集アイコン（右下に小さく）
- ユーザー情報
  - ユーザー名: 例「山田 花子」
  - ユーザーID: 例「@yamada_hanako」
- 右矢印アイコン

### アカウント設定セクション

**ヘッダー**
- セクションタイトル: 「アカウント」

**設定項目リスト**

1. プロフィール編集
   - アイコン: 人アイコン
   - ラベル: 「プロフィール編集」
   - 右矢印

2. メールアドレス
   - アイコン: メールアイコン
   - ラベル: 「メールアドレス」
   - 現在値: 例「hanako@example.com」
   - 右矢印

3. パスワード変更
   - アイコン: 鍵アイコン
   - ラベル: 「パスワード変更」
   - 右矢印

### 通知設定セクション

**ヘッダー**
- セクションタイトル: 「通知」

**設定項目リスト**

1. プッシュ通知（マスタースイッチ）
   - アイコン: ベルアイコン
   - ラベル: 「プッシュ通知」
   - トグルスイッチ（右側）

2. 立替申請通知（サブ項目、インデント）
   - ラベル: 「立替申請通知」
   - トグルスイッチ
   - マスター無効時はグレーアウト

3. 返済通知（サブ項目、インデント）
   - ラベル: 「返済通知」
   - トグルスイッチ
   - マスター無効時はグレーアウト

4. 相殺通知（サブ項目、インデント）
   - ラベル: 「相殺通知」
   - トグルスイッチ
   - マスター無効時はグレーアウト

5. フレンド申請通知（サブ項目、インデント）
   - ラベル: 「フレンド申請通知」
   - トグルスイッチ
   - マスター無効時はグレーアウト

### アプリ設定セクション

**ヘッダー**
- セクションタイトル: 「アプリ」

**設定項目リスト**

1. 言語
   - アイコン: 地球アイコン
   - ラベル: 「言語」
   - 現在値: 「日本語」
   - 右矢印

2. テーマ
   - アイコン: パレットアイコン
   - ラベル: 「テーマ」
   - 現在値: 「ライト」
   - 右矢印

3. データ管理
   - アイコン: データベースアイコン
   - ラベル: 「データ管理」
   - 右矢印

### サポートセクション

**ヘッダー**
- セクションタイトル: 「サポート」

**設定項目リスト**

1. ヘルプ
   - アイコン: 疑問符アイコン
   - ラベル: 「ヘルプ」
   - 右矢印

2. 利用規約
   - アイコン: ドキュメントアイコン
   - ラベル: 「利用規約」
   - 右矢印

3. プライバシーポリシー
   - アイコン: シールドアイコン
   - ラベル: 「プライバシーポリシー」
   - 右矢印

4. お問い合わせ
   - アイコン: メールアイコン
   - ラベル: 「お問い合わせ」
   - 右矢印

### その他セクション

**ボタン**

1. ログアウトボタン
   - 幅広ボタン
   - セカンダリスタイル

2. アカウント削除ボタン
   - 幅広ボタン
   - デンジャースタイル

## ユーザーアクション

| アクション | トリガー | 遷移先/処理 | 使用API |
|---|---|---|---|
| 戻る | 戻るボタンクリック | 前画面へ戻る | - |
| プロフィール編集 | カード/項目クリック | プロフィール編集モーダル表示 | - |
| メールアドレス変更 | 項目クリック | メール変更モーダル表示 | - |
| パスワード変更 | 項目クリック | パスワード変更モーダル表示 | - |
| 通知設定変更 | トグルスイッチ操作 | 設定値の即時保存 | - |
| 言語変更 | 項目クリック | 言語選択モーダル表示 | - |
| テーマ変更 | 項目クリック | テーマ選択モーダル表示 | - |
| データ管理 | 項目クリック | データ管理画面へ遷移 | - |
| ヘルプ | 項目クリック | ヘルプページへ遷移 | - |
| 利用規約 | 項目クリック | 利用規約ページへ遷移 | - |
| プライバシーポリシー | 項目クリック | プライバシーポリシーページへ遷移 | - |
| お問い合わせ | 項目クリック | お問い合わせフォーム表示 | - |
| ログアウト | ボタンクリック | ログアウト確認モーダル表示 | - |
| アカウント削除 | ボタンクリック | アカウント削除確認モーダル表示 | - |

## モーダル一覧

### modal-edit-profile（プロフィール編集）

**表示項目**
- タイトル: 「プロフィール編集」
- 閉じるボタン（×）

**フォーム項目**

1. アバター
   - 現在のアバター絵文字表示（大きく）
   - 変更ボタン
   - 絵文字ピッカー表示

2. ユーザー名
   - テキスト入力
   - 現在値が初期表示
   - 最大文字数: 50文字

3. ユーザーID（表示のみ、編集不可）
   - 例: @yamada_hanako
   - ヒント: 「ユーザーIDは変更できません」

**ボタン**
- キャンセルボタン（セカンダリ）
- 保存するボタン（プライマリ）

### modal-change-email（メールアドレス変更）

**表示項目**
- タイトル: 「メールアドレス変更」
- 閉じるボタン（×）

**フォーム項目**

1. 現在のメールアドレス（表示のみ）
   - 例: hanako@example.com

2. 新しいメールアドレス
   - メール型input
   - プレースホルダー: 「新しいメールアドレス」

3. パスワード（確認用）
   - パスワード型input
   - プレースホルダー: 「パスワードを入力」

**注記**
- 「確認メールを送信します」

**ボタン**
- キャンセルボタン（セカンダリ）
- 変更するボタン（プライマリ）

### modal-change-password（パスワード変更）

**表示項目**
- タイトル: 「パスワード変更」
- 閉じるボタン（×）

**フォーム項目**

1. 現在のパスワード
   - パスワード型input
   - プレースホルダー: 「現在のパスワード」

2. 新しいパスワード
   - パスワード型input
   - プレースホルダー: 「新しいパスワード」
   - ヒント: 「8文字以上」

3. 新しいパスワード（確認）
   - パスワード型input
   - プレースホルダー: 「新しいパスワード（再入力）」

**ボタン**
- キャンセルボタン（セカンダリ）
- 変更するボタン（プライマリ）

### modal-language（言語選択）

**表示項目**
- タイトル: 「言語設定」
- 閉じるボタン（×）

**選択肢**（ラジオボタン）
- 日本語（選択中）
- English
- 中文（簡体）
- 한국어

**ボタン**
- キャンセルボタン（セカンダリ）
- 適用するボタン（プライマリ）

### modal-theme（テーマ選択）

**表示項目**
- タイトル: 「テーマ設定」
- 閉じるボタン（×）

**選択肢**（ラジオボタン、プレビュー付き）
- ライト（選択中）
- ダーク
- システム設定に従う

**ボタン**
- キャンセルボタン（セカンダリ）
- 適用するボタン（プライマリ）

### modal-logout-confirm（ログアウト確認）

**表示項目**
- タイトル: 「ログアウト」
- 閉じるボタン（×）

**確認メッセージ**
- 「ログアウトしますか？」

**ボタン**
- キャンセルボタン（セカンダリ）
- ログアウトボタン（プライマリ）

### modal-delete-account（アカウント削除確認）

**表示項目**
- タイトル: 「アカウント削除」
- 閉じるボタン（×）

**警告メッセージ**
- 「アカウントを削除すると、すべてのデータが完全に削除されます」
- 「この操作は取り消せません」

**確認フォーム**
- パスワード入力
  - プレースホルダー: 「パスワードを入力して確認」

**ボタン**
- キャンセルボタン（セカンダリ）
- 削除するボタン（デンジャー）

## 使用API

### 初期表示時

**アカウント情報取得**
```
GET /api/v1/account
```
レスポンス例:
```json
{
  "id": "user_001",
  "name": "山田花子"
}
```

### プロフィール更新時

```
PUT /api/v1/account
```
リクエストボディ:
```json
{
  "name": "山田 花子"
}
```
レスポンス: 200 OK

### ログアウト時

（認証システムのログアウト処理）

### アカウント削除時

（API未定義：将来的に削除APIを追加予定）

## 画面遷移

### 遷移元
- ホーム画面: 設定アイコンクリック時
- ボトムナビゲーション

### 遷移先
- データ管理画面
- ヘルプページ
- 利用規約ページ
- プライバシーポリシーページ

## 実装時の注意事項

1. **通知設定の保存**
   - トグルスイッチ操作時は即座に保存
   - ローカルストレージに保存（将来的にサーバー同期）

2. **パスワード変更**
   - 新しいパスワードと確認用パスワードが一致するか検証
   - パスワード強度チェック
   - 変更後は再ログイン不要

3. **メールアドレス変更**
   - 確認メールを送信
   - メール内のリンクをクリックして変更完了

4. **テーマ変更**
   - 即座に反映
   - ローカルストレージに保存

5. **言語変更**
   - アプリ全体に反映
   - 再読み込みが必要な場合は通知

6. **アカウント削除**
   - 非常に重要な操作なので複数回確認
   - パスワード入力必須
   - 削除後はログイン画面へ遷移

7. **ログアウト**
   - セッション情報をクリア
   - ローカルストレージのトークンを削除
   - ログイン画面へ遷移

8. **エラーハンドリング**
   - パスワード不一致
   - メールアドレス形式エラー
   - 適切なエラーメッセージ表示

9. **セキュリティ**
   - パスワードはマスク表示
   - 表示/非表示切り替えボタン
   - HTTPSのみで通信
