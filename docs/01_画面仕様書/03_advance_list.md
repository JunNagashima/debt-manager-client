# 立替申請一覧画面 (ADVANCE_LIST)

## 画面ID
`ADVANCE_LIST`

## 画面の目的
- 立替申請の送受信を一元管理
- 受け取った申請の承認/却下
- 送った申請の状況確認と取消

## 表示要素

### ヘッダー

**中央**
- 画面タイトル: 「立替申請」

**右側**
- 新規作成ボタン（+アイコン）

### タブ切り替え

2つのタブ：

1. **受け取った申請**
   - 件数バッジ付き（承認待ちの件数）
   - 例: 「受け取った申請 [2]」

2. **送った申請**
   - バッジなし

### フィルターチップ

4つのフィルター：
- すべて（デフォルト選択）
- 承認待ち
- 承認済み
- 却下

### 受け取った申請タブコンテンツ

#### 承認待ちセクション

**ヘッダー**
- ステータスドット（オレンジ）
- タイトル: 「承認待ち」
- 件数表示: 例「2件」

**申請カードリスト**

各カードの構成：

**ヘッダー行**
- ユーザー情報（左側）
  - アバター
  - ユーザー名: 例「佐藤 花子」
  - 申請日: 例「2025/12/19」
- 金額（右側）
  - 例: 「¥3,000」（借り方向の赤色）

**ボディ**
- メモ: 例「ランチ代」

**フッター**
- ステータスバッジ: 「承認待ち」（オレンジ）
- アクションリンク: 「確認する →」

#### 承認済みセクション

**ヘッダー**
- ステータスドット（緑）
- タイトル: 「承認済み」
- 件数表示: 例「3件」

**申請カードリスト**

各カードの構成：
- 基本構成は承認待ちと同じ
- ステータスバッジ: 「承認済み」（緑）
- 承認日表示: 例「12/15 承認」

#### 却下セクション

**ヘッダー**
- ステータスドット（赤）
- タイトル: 「却下」
- 件数表示: 例「1件」

**申請カードリスト**

各カードの構成：
- 基本構成は承認待ちと同じ
- 金額は通常色（グレー）
- ステータスバッジ: 「却下」（赤）
- 却下日表示: 例「12/06 却下」

### 送った申請タブコンテンツ

**構成は受け取った申請と同様**

違い：
- 方向が逆（自分→相手）
- 金額は貸し方向の色（緑色）
- 承認待ちカードには「取り消す」ボタンがある

## ユーザーアクション

| アクション | トリガー | 遷移先/処理 | 使用API |
|---|---|---|---|
| 新規申請作成 | +ボタンクリック | 立替申請作成モーダル表示 | - |
| タブ切り替え | タブクリック | タブコンテンツの切り替え | - |
| フィルター適用 | チップクリック | リストのフィルタリング | - |
| 承認待ち申請確認 | カードクリック | 承認モーダル表示 | - |
| 承認済み申請確認 | カードクリック | 承認済み詳細モーダル表示 | - |
| 却下申請確認 | カードクリック | 却下詳細モーダル表示 | - |
| 送った申請詳細 | カードクリック（送った申請） | 送信中詳細モーダル表示 | - |
| 送った申請取消 | 取り消すボタンクリック | 申請取消 | POST /api/v1/advance-requests/:id/cancel |

## モーダル一覧

### modal-advance-create（立替申請作成）

**表示項目**
- タイトル: 「立替を申請」
- 閉じるボタン（×）

**フォーム項目**

1. 誰が立て替えた？
   - セレクトボックス
   - フレンド一覧から選択
   - プレースホルダー: 「フレンドを選択」

2. 金額
   - 数値入力（¥プレフィックス付き）
   - プレースホルダー: 「0」
   - 最小値: 1

3. 日付
   - date型input
   - デフォルト: 当日
   - ヒント: 「未来の日付は選択できません」

4. メモ（任意）
   - テキスト入力
   - プレースホルダー: 「例：ランチ代」

**ボタン**
- キャンセルボタン（セカンダリ）
- 申請するボタン（プライマリ）

### modal-approve-advance（立替申請承認）

**表示項目**
- タイトル: 「立替申請の確認」
- 閉じるボタン（×）

**申請内容カード**
- 申請者: 例「佐藤 花子さん」
- 金額: 例「¥3,000」（大きく強調）
- 日付: 例「2025/12/19」
- メモ: 例「ランチ代」

**影響通知**（警告スタイル）
- 警告アイコン
- タイトル: 「承認すると...」
- 説明: 「あなたの借りが **¥3,000** 増えます」

**ボタン**
- 却下ボタン（デンジャー）
- 承認するボタン（プライマリ）

### modal-detail-approved（承認済み詳細）

**表示項目**
- タイトル: 「立替申請の詳細」
- 閉じるボタン（×）

**取引サマリー**
- 取引バッジ: [立替] [承認済み]
- 金額: 例「¥2,500」（借り方向の赤色）
- 方向性: 例「鈴木 一郎さん → あなた」

**詳細情報カード**
- 申請日: 例「2025/12/15」
- 承認日: 例「2025/12/15」
- メモ: 例「飲み物代」

**ボタン**
- 閉じるボタン（セカンダリ、フル幅）

### modal-detail-rejected（却下詳細）

**表示項目**
- タイトル: 「立替申請の詳細」
- 閉じるボタン（×）

**取引サマリー**
- 取引バッジ: [立替] [却下]
- 金額: 例「¥1,000」（グレー）
- 方向性: 例「高橋 健太さん → あなた」

**詳細情報カード**
- 申請日: 例「2025/12/05」
- 却下日: 例「2025/12/06」
- メモ: 例「交通費」

**ボタン**
- 閉じるボタン（セカンダリ、フル幅）

### modal-detail-sent-pending（送信中詳細）

**表示項目**
- タイトル: 「立替申請の詳細」
- 閉じるボタン（×）

**取引サマリー**
- 取引バッジ: [立替] [承認待ち]
- 金額: 例「¥2,000」（貸し方向の緑色）
- 方向性: 例「あなた → 鈴木 一郎さん」

**詳細情報カード**
- 申請日: 例「2025/12/20」
- メモ: 例「タクシー代」

**承認待ち通知**
- 時計アイコン
- メッセージ: 「相手の承認をお待ちください」

**ボタン**（縦並び）
- 閉じるボタン（セカンダリ）
- この申請を取り消すボタン（デンジャー、ゴースト）

## 使用API

### 初期表示時

**立替申請一覧取得**
```
GET /api/v1/advance-requests
```
レスポンス例:
```json
[
  {
    "id": "req_001",
    "payerId": "user_001",
    "receiverId": "user_002",
    "amount": 3000,
    "occurredDate": "2025-10-19",
    "status": "PENDING",
    "note": "ランチ代",
    "createdAt": "2025-10-19T12:00:00Z"
  }
]
```

### 立替申請作成時

```
POST /api/v1/advance-requests
```
リクエストボディ:
```json
{
  "payerId": "user_001",
  "receiverId": "user_002",
  "amount": 3000,
  "occurredDate": "2025-10-19",
  "note": "ランチ代"
}
```
レスポンス: 201 Created

### 立替申請承認時

```
POST /api/v1/advance-requests/:id/approve
```
レスポンス: 200 OK

### 立替申請却下時

```
POST /api/v1/advance-requests/:id/reject
```
レスポンス: 200 OK

### 立替申請取消時

```
POST /api/v1/advance-requests/:id/cancel
```
レスポンス: 200 OK

## 画面遷移

### 遷移元
- ホーム画面: 対応待ち「すべて見る」クリック時
- ボトムナビゲーション

### 遷移先
- なし（モーダルのみ）

## 実装時の注意事項

1. **タブとフィルターの連動**
   - タブ切り替え時は適切なフィルターにリセット
   - フィルター状態はタブごとに独立して保持

2. **リアルタイム更新**
   - 承認/却下/取消後は一覧を自動更新
   - ポーリングまたはWebSocketで新規申請を検知

3. **空の状態**
   - 該当する申請がない場合は空状態メッセージを表示
   - 「まだ立替申請はありません」など

4. **エラーハンドリング**
   - 承認/却下失敗時は適切なエラーメッセージ
   - ネットワークエラー時は再試行オプション

5. **パフォーマンス**
   - 一覧は適切なページネーションまたは仮想スクロール
   - 初期表示は直近50件程度に制限

6. **アクセシビリティ**
   - カードはキーボードで操作可能
   - ステータスは色だけでなくテキストでも識別可能

7. **アニメーション**
   - タブ切り替えはスムーズに
   - カード削除時はフェードアウト
   - 新規カード追加時はフェードイン
